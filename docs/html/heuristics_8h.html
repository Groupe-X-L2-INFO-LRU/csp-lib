<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>CSP-lib: Constraint Satisfaction Problem Solver Library: src/heuristics.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="custom_doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">CSP-lib: Constraint Satisfaction Problem Solver Library<span id="projectnumber">&#160;1.0</span>
   </div>
   <div id="projectbrief">A C library for modeling and solving constraint satisfaction problems with forward checking and heuristics</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('heuristics_8h.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">heuristics.h File Reference</div></div>
</div><!--header-->
<div class="contents">

<p>Heuristics for improving CSP solver performance.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;stddef.h&gt;</code><br />
<code>#include &quot;<a class="el" href="forward-checking_8h_source.html">forward-checking.h</a>&quot;</code><br />
</div><div class="textblock"><div id="dynsection-0" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-0-trigger" src="closed.png" alt="+"/> Include dependency graph for heuristics.h:</div>
<div id="dynsection-0-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-0-content" class="dyncontent" style="display:none;">
<div class="center"><img src="heuristics_8h__incl.png" border="0" usemap="#asrc_2heuristics_8h" alt=""/></div>
<map name="asrc_2heuristics_8h" id="asrc_2heuristics_8h">
<area shape="rect" title="Heuristics for improving CSP solver performance." alt="" coords="35,5,150,31"/>
<area shape="rect" title=" " alt="" coords="5,225,79,251"/>
<area shape="poly" title=" " alt="" coords="88,32,67,79,52,151,46,212,41,212,47,150,62,78,84,30"/>
<area shape="rect" href="forward-checking_8h.html" title="Forward checking algorithm for constraint satisfaction problems." alt="" coords="77,79,218,104"/>
<area shape="poly" title=" " alt="" coords="104,29,132,66,128,69,100,33"/>
<area shape="rect" href="csp_8h.html" title="Header file for the CSP (Constraint Satisfaction Problem) library." alt="" coords="117,152,172,177"/>
<area shape="poly" title=" " alt="" coords="150,104,148,139,143,138,144,104"/>
<area shape="poly" title=" " alt="" coords="130,180,72,219,69,215,127,175"/>
<area shape="rect" title=" " alt="" coords="105,225,185,251"/>
<area shape="poly" title=" " alt="" coords="147,178,147,212,142,212,142,178"/>
</map>
</div>
</div><div class="textblock"><div id="dynsection-1" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-1-trigger" src="closed.png" alt="+"/> This graph shows which files directly or indirectly include this file:</div>
<div id="dynsection-1-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-1-content" class="dyncontent" style="display:none;">
<div class="center"><img src="heuristics_8h__dep__incl.png" border="0" usemap="#asrc_2heuristics_8hdep" alt=""/></div>
<map name="asrc_2heuristics_8hdep" id="asrc_2heuristics_8hdep">
<area shape="rect" title="Heuristics for improving CSP solver performance." alt="" coords="455,5,570,31"/>
<area shape="rect" href="forward-checking_8c.html" title="Forward checking algorithm with MRV and LCV heuristics implementation." alt="" coords="5,86,167,111"/>
<area shape="poly" title=" " alt="" coords="442,34,178,81,141,89,140,83,178,76,441,29"/>
<area shape="rect" href="heuristics_8c.html" title="Implementation of heuristics for improving CSP solver performance." alt="" coords="191,86,304,111"/>
<area shape="poly" title=" " alt="" coords="462,37,287,89,285,83,460,32"/>
<area shape="rect" href="test-order-values-lcv_8c.html" title=" " alt="" coords="329,79,491,119"/>
<area shape="poly" title=" " alt="" coords="488,41,436,81,433,76,485,37"/>
<area shape="rect" href="test-prune-neighbors_8c.html" title=" " alt="" coords="515,86,715,111"/>
<area shape="poly" title=" " alt="" coords="541,37,602,84,599,88,537,41"/>
<area shape="rect" href="test-restore-pruned_8c.html" title=" " alt="" coords="739,79,870,119"/>
<area shape="poly" title=" " alt="" coords="569,32,740,77,738,82,568,37"/>
<area shape="rect" href="test-select-unassigned-var_8c.html" title=" " alt="" coords="894,79,1089,119"/>
<area shape="poly" title=" " alt="" coords="584,28,882,76,894,78,893,83,882,81,583,33"/>
</map>
</div>
</div>
<p><a href="heuristics_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a9c3a8a6b03e49553f45c6144f97e1fb4" id="r_a9c3a8a6b03e49553f45c6144f97e1fb4"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="heuristics_8h.html#a9c3a8a6b03e49553f45c6144f97e1fb4">order_values_lcv</a> (const <a class="el" href="csp_8h.html#aae386fbd70088e2ccb0080b6758d590f">CSPProblem</a> *csp, <a class="el" href="forward-checking_8h.html#a45693bcbd5370e7777a5c1f0a74ef0a2">CSPForwardCheckContext</a> *ctx, const size_t *values, const void *data, size_t var, size_t *ordered, size_t *n_vals)</td></tr>
<tr class="memdesc:a9c3a8a6b03e49553f45c6144f97e1fb4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Orders values for a given variable using the LCV (Least Constraining Value) heuristic.  <br /></td></tr>
<tr class="separator:a9c3a8a6b03e49553f45c6144f97e1fb4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2840f304ec278feae32d3d11915a7a78" id="r_a2840f304ec278feae32d3d11915a7a78"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="heuristics_8h.html#a2840f304ec278feae32d3d11915a7a78">prune_neighbors</a> (const <a class="el" href="csp_8h.html#aae386fbd70088e2ccb0080b6758d590f">CSPProblem</a> *csp, const size_t *values, const void *data, <a class="el" href="forward-checking_8h.html#a45693bcbd5370e7777a5c1f0a74ef0a2">CSPForwardCheckContext</a> *ctx, size_t var, size_t *counts, size_t **pruned)</td></tr>
<tr class="memdesc:a2840f304ec278feae32d3d11915a7a78"><td class="mdescLeft">&#160;</td><td class="mdescRight">Prunes inconsistent values from neighboring variables after an assignment.  <br /></td></tr>
<tr class="separator:a2840f304ec278feae32d3d11915a7a78"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a22131bfb5921b024b7886b33b3fa1c4b" id="r_a22131bfb5921b024b7886b33b3fa1c4b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="heuristics_8h.html#a22131bfb5921b024b7886b33b3fa1c4b">restore_pruned</a> (<a class="el" href="forward-checking_8h.html#a45693bcbd5370e7777a5c1f0a74ef0a2">CSPForwardCheckContext</a> *ctx, const size_t *counts, size_t **pruned)</td></tr>
<tr class="memdesc:a22131bfb5921b024b7886b33b3fa1c4b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Restores previously pruned values when backtracking.  <br /></td></tr>
<tr class="separator:a22131bfb5921b024b7886b33b3fa1c4b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a934ee1c54ecdfa65b205d3f9888e38de" id="r_a934ee1c54ecdfa65b205d3f9888e38de"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="heuristics_8h.html#a934ee1c54ecdfa65b205d3f9888e38de">select_unassigned_var</a> (const <a class="el" href="forward-checking_8h.html#a45693bcbd5370e7777a5c1f0a74ef0a2">CSPForwardCheckContext</a> *ctx)</td></tr>
<tr class="memdesc:a934ee1c54ecdfa65b205d3f9888e38de"><td class="mdescLeft">&#160;</td><td class="mdescRight">Selects the next unassigned variable using the MRV (Minimum Remaining Values) heuristic.  <br /></td></tr>
<tr class="separator:a934ee1c54ecdfa65b205d3f9888e38de"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Heuristics for improving CSP solver performance. </p>
<p>This file provides implementations of common heuristics used to improve the efficiency of constraint satisfaction problem (CSP) solvers. These heuristics help guide the search process by making intelligent choices about:</p>
<ol type="1">
<li>Which variable to assign next (variable ordering)</li>
<li>Which value to try first for a variable (value ordering)</li>
<li>How to prune impossible values during forward checking</li>
<li>How to restore pruned values during backtracking</li>
</ol>
<h1><a class="anchor" id="heuristics_overview"></a>
Overview of CSP Heuristics</h1>
<p>Heuristics are essential for making CSP solvers efficient in practice. Without good heuristics, even moderately sized problems can become computationally intractable. The heuristics in this library focus on:</p>
<h2><a class="anchor" id="variable_ordering"></a>
Variable Ordering</h2>
<p><b>Minimum Remaining Values (MRV)</b>: Also known as "fail-first" heuristic, this selects the variable with the fewest remaining legal values in its domain. The intuition is that if a variable has few legal values, it's more likely to cause a failure soon, which allows the solver to backtrack earlier rather than later.</p>
<div class="image">
<img src="mrv_heuristic.png" alt=""/>
<div class="caption">
MRV Heuristic: Choose variable with fewest remaining values</div></div>
<h2><a class="anchor" id="value_ordering"></a>
Value Ordering</h2>
<p><b>Least Constraining Value (LCV)</b>: This heuristic chooses the value that rules out the fewest choices for neighboring variables. The intuition is to maximize the flexibility for subsequent variable assignments, increasing the likelihood of finding a solution without backtracking.</p>
<div class="image">
<img src="lcv_heuristic.png" alt=""/>
<div class="caption">
LCV Heuristic: Choose value that constrains neighbors least</div></div>
<h2><a class="anchor" id="domain_pruning"></a>
Domain Pruning</h2>
<p><b>Forward Checking</b>: While not strictly a heuristic, this approach works alongside the variable and value ordering heuristics. It prunes domain values that would violate constraints given the current assignment, which enables early detection of dead ends.</p>
<h1><a class="anchor" id="heuristics_impact"></a>
Performance Impact</h1>
<p>Properly implemented heuristics can dramatically improve solving performance:</p><ul>
<li>Reduce search space exploration by orders of magnitude</li>
<li>Allow solving of much larger problems</li>
<li>Convert exponential-time searches to near-linear in many practical cases</li>
</ul>
<h1><a class="anchor" id="heuristics_usage"></a>
Usage</h1>
<p>The heuristics are integrated directly into the forward checking algorithm and can be used by simply calling the forward checking solver:</p>
<div class="fragment"><div class="line"><span class="comment">// Using MRV and LCV heuristics by default</span></div>
<div class="line">solve_with_forward_checking(problem, solution, NULL, NULL);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// To use custom heuristic functions</span></div>
<div class="line">solve_with_forward_checking(problem, solution, custom_select_var, custom_order_values);</div>
</div><!-- fragment --><dl class="section author"><dt>Author</dt><dd>Ch. Demko (original) </dd></dl>
<dl class="section date"><dt>Date</dt><dd>2024-2025 </dd></dl>
<dl class="section version"><dt>Version</dt><dd>1.0 </dd></dl>
<dl class="section see"><dt>See also</dt><dd>solve_with_forward_checking() </dd>
<dd>
select_unassigned_variable_mrv() </dd>
<dd>
order_domain_values_lcv() </dd></dl>

<p class="definition">Definition in file <a class="el" href="heuristics_8h_source.html">heuristics.h</a>.</p>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="a9c3a8a6b03e49553f45c6144f97e1fb4" name="a9c3a8a6b03e49553f45c6144f97e1fb4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9c3a8a6b03e49553f45c6144f97e1fb4">&#9670;&#160;</a></span>order_values_lcv()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void order_values_lcv </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="csp_8h.html#aae386fbd70088e2ccb0080b6758d590f">CSPProblem</a> *&#160;</td>
          <td class="paramname"><em>csp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="forward-checking_8h.html#a45693bcbd5370e7777a5c1f0a74ef0a2">CSPForwardCheckContext</a> *&#160;</td>
          <td class="paramname"><em>ctx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const size_t *&#160;</td>
          <td class="paramname"><em>values</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>var</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t *&#160;</td>
          <td class="paramname"><em>ordered</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t *&#160;</td>
          <td class="paramname"><em>n_vals</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">extern</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Orders values for a given variable using the LCV (Least Constraining Value) heuristic. </p>
<p>The LCV heuristic chooses values in order of how many options they rule out for neighboring variables. The values that eliminate the fewest options for neighbors are tried first. This increases the likelihood of finding a valid assignment without having to backtrack.</p>
<p>This function counts "conflicts" - the number of values in neighboring variables that would be ruled out by each possible value assignment - and sorts values from least constraining (fewest conflicts) to most constraining (most conflicts).</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">csp</td><td>The CSP problem instance. </td></tr>
    <tr><td class="paramname">ctx</td><td>The forward checking context. </td></tr>
    <tr><td class="paramname">values</td><td>The current assignment of values to variables. </td></tr>
    <tr><td class="paramname">data</td><td>User-provided data for constraint checking. </td></tr>
    <tr><td class="paramname">var</td><td>The variable for which to order values. </td></tr>
    <tr><td class="paramname">ordered</td><td>Output array where ordered values will be stored. </td></tr>
    <tr><td class="paramname">n_vals</td><td>Output parameter that will be set to the number of valid values. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section pre"><dt>Precondition</dt><dd>csp, ctx, values, ordered, and n_vals must not be NULL. </dd>
<dd>
var must be a valid variable index in the CSP. </dd>
<dd>
ordered must have enough space to hold all possible values for the variable. </dd></dl>
<dl class="section post"><dt>Postcondition</dt><dd>ordered[0..(*n_vals-1)] contains the values in the domain of var ordered by the LCV heuristic. </dd>
<dd>
*n_vals is set to the number of valid values in the domain of var.</dd></dl>
<p>Orders values for a given variable using the LCV (Least Constraining Value) heuristic.</p>
<p>This function orders the values in a variable's domain by how constraining they are on the domains of neighboring variables (those connected by constraints).</p>
<p>For each possible value in the domain:</p><ol type="1">
<li>It counts how many values would become invalid in neighboring variables if this value is chosen</li>
<li>It sorts the values from least constraining (fewest conflicts) to most constraining</li>
</ol>
<p>This heuristic increases the likelihood of finding a valid assignment without backtracking by trying the values that leave the most flexibility for future assignments first.</p>
<p>The implementation:</p><ul>
<li>Only considers binary constraints (between exactly 2 variables)</li>
<li>Uses a simple insertion sort to order the values</li>
<li>Temporarily modifies the values array for checking (but restores it)</li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">csp</td><td>The CSP problem. </td></tr>
    <tr><td class="paramname">ctx</td><td>The forward checking context. </td></tr>
    <tr><td class="paramname">values</td><td>The current assignment of values to variables. </td></tr>
    <tr><td class="paramname">data</td><td>User-provided data for constraint checking. </td></tr>
    <tr><td class="paramname">var</td><td>The variable for which to order values. </td></tr>
    <tr><td class="paramname">ordered</td><td>Output array where ordered values will be stored. </td></tr>
    <tr><td class="paramname">n_vals</td><td>Output parameter that will be set to the number of valid values. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="heuristics_8c_source.html#l00098">98</a> of file <a class="el" href="heuristics_8c_source.html">heuristics.c</a>.</p>

<p class="reference">References <a class="el" href="forward-checking_8h_source.html#l00080">_CSPForwardCheckContext::assigned</a>, <a class="el" href="csp__internal_8h_source.html#l00036">_CSPConstraint::check</a>, <a class="el" href="csp_8c_source.html#l00105">csp_constraint_get_arity()</a>, <a class="el" href="csp_8c_source.html#l00121">csp_constraint_get_variable()</a>, <a class="el" href="csp_8c_source.html#l00243">csp_problem_get_constraint()</a>, <a class="el" href="csp_8c_source.html#l00221">csp_problem_get_num_constraints()</a>, <a class="el" href="forward-checking_8h_source.html#l00079">_CSPForwardCheckContext::current_domains</a>, and <a class="el" href="forward-checking_8h_source.html#l00078">_CSPForwardCheckContext::original_domain_sizes</a>.</p>

<p class="reference">Referenced by <a class="el" href="forward-checking_8c_source.html#l00081">backtrack_fc()</a>, and <a class="el" href="test-order-values-lcv_8c_source.html#l00017">test_lcv_basic()</a>.</p>
<div id="dynsection-2" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-2-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-2-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-2-content" class="dyncontent" style="display:none;">
<div class="center"><img src="heuristics_8h_a9c3a8a6b03e49553f45c6144f97e1fb4_cgraph.png" border="0" usemap="#aheuristics_8h_a9c3a8a6b03e49553f45c6144f97e1fb4_cgraph" alt=""/></div>
<map name="aheuristics_8h_a9c3a8a6b03e49553f45c6144f97e1fb4_cgraph" id="aheuristics_8h_a9c3a8a6b03e49553f45c6144f97e1fb4_cgraph">
<area shape="rect" title="Orders values for a given variable using the LCV (Least Constraining Value) heuristic." alt="" coords="5,106,129,131"/>
<area shape="rect" href="csp_8c.html#a0ec9ba5a3f78127657d0ab0f2d3a5bbd" title="Gets the arity of a constraint." alt="" coords="207,5,343,45"/>
<area shape="poly" title=" " alt="" coords="87,104,128,80,176,55,194,48,196,52,178,60,130,84,90,108"/>
<area shape="rect" href="csp_8c.html#a4cfb5884d7fe282dbecebefb53bb9cdd" title="Gets the variable ID associated with a specific position in the constraint." alt="" coords="207,69,343,109"/>
<area shape="poly" title=" " alt="" coords="129,107,193,98,193,103,130,113"/>
<area shape="rect" href="csp_8c.html#aba7697a379d5f761429bb911e2bc2bbc" title="Gets the constraint at the specified position in the CSP problem." alt="" coords="177,134,372,159"/>
<area shape="poly" title=" " alt="" coords="130,124,167,129,167,135,129,130"/>
<area shape="rect" href="csp_8c.html#a1dc56cea8c87ec1ef2e4489536cd1f0e" title="Gets the number of constraints in the CSP problem." alt="" coords="194,184,355,224"/>
<area shape="poly" title=" " alt="" coords="94,129,178,168,200,177,198,182,176,173,92,134"/>
<area shape="rect" href="csp_8c.html#aca1712012517bff1090a471f502cf729" title="Checks if the CSP library is initialized." alt="" coords="420,106,525,131"/>
<area shape="poly" title=" " alt="" coords="344,43,373,55,444,96,441,101,371,60,342,48"/>
<area shape="poly" title=" " alt="" coords="343,97,406,106,406,111,342,102"/>
<area shape="poly" title=" " alt="" coords="364,131,406,125,407,131,365,137"/>
<area shape="poly" title=" " alt="" coords="337,182,371,168,436,136,438,141,373,173,339,186"/>
</map>
</div>
<div id="dynsection-3" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-3-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-3-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-3-content" class="dyncontent" style="display:none;">
<div class="center"><img src="heuristics_8h_a9c3a8a6b03e49553f45c6144f97e1fb4_icgraph.png" border="0" usemap="#aheuristics_8h_a9c3a8a6b03e49553f45c6144f97e1fb4_icgraph" alt=""/></div>
<map name="aheuristics_8h_a9c3a8a6b03e49553f45c6144f97e1fb4_icgraph" id="aheuristics_8h_a9c3a8a6b03e49553f45c6144f97e1fb4_icgraph">
<area shape="rect" title="Orders values for a given variable using the LCV (Least Constraining Value) heuristic." alt="" coords="685,208,809,233"/>
<area shape="rect" href="forward-checking_8c.html#a1f0b1f4d23987c6c2209df2c7e2570ce" title=" " alt="" coords="537,181,634,207"/>
<area shape="poly" title=" " alt="" coords="672,211,634,205,635,199,673,206"/>
<area shape="rect" href="test-order-values-lcv_8c.html#a2e8b8362481e9c5d3c195e4bb6c66f85" title=" " alt="" coords="533,232,637,257"/>
<area shape="poly" title=" " alt="" coords="672,234,638,240,637,234,671,229"/>
<area shape="poly" title=" " alt="" coords="613,171,605,163,585,160,569,162,560,167,558,172,563,180,558,183,553,173,556,163,567,157,585,155,607,158,617,167"/>
<area shape="rect" href="forward-checking_8c.html#aab2b763fd1833131dc1b7f43b2c7942a" title="Solves a CSP problem using the forward checking algorithm with heuristics." alt="" coords="292,171,485,211"/>
<area shape="poly" title=" " alt="" coords="523,196,486,195,486,190,523,190"/>
<area shape="rect" href="test-solve-sudoku-integration_8c.html#ae66f6b31b5ad750f1fe042a706a4e3d4" title=" " alt="" coords="149,5,201,31"/>
<area shape="poly" title=" " alt="" coords="363,162,311,102,278,71,243,44,200,26,202,21,245,40,282,67,315,99,367,158"/>
<area shape="rect" href="solve-queens_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title=" " alt="" coords="149,55,201,80"/>
<area shape="poly" title=" " alt="" coords="350,165,301,129,243,94,200,77,202,72,245,89,304,124,354,160"/>
<area shape="rect" href="test-forward-checking_8c.html#ad73208eb4ba9df875d1fdf3c0b43a6e7" title=" " alt="" coords="117,153,232,179"/>
<area shape="poly" title=" " alt="" coords="278,181,232,175,232,170,279,176"/>
<area shape="rect" href="test-solve-forward-checking_8c.html#ad2ec5370481a424ba0df59de2b8ede5b" title=" " alt="" coords="109,104,240,129"/>
<area shape="poly" title=" " alt="" coords="317,169,243,143,211,132,213,127,245,138,319,164"/>
<area shape="rect" href="test-forward-checking_8c.html#aebadbf73aad5c0730e4272306f6a5388" title=" " alt="" coords="105,203,244,228"/>
<area shape="poly" title=" " alt="" coords="278,206,245,210,244,205,278,201"/>
<area shape="rect" href="test-forward-checking_8c.html#ab497f67117be78c07a415960ba822485" title=" " alt="" coords="111,252,238,277"/>
<area shape="poly" title=" " alt="" coords="317,218,214,254,212,249,316,213"/>
<area shape="rect" href="test-forward-checking_8c.html#a769d87bae594656fbf9732ac5173f5b1" title=" " alt="" coords="110,301,239,327"/>
<area shape="poly" title=" " alt="" coords="304,220,294,227,279,242,270,259,262,275,246,292,225,304,223,299,242,288,257,272,266,256,274,239,290,223,301,216"/>
<area shape="rect" href="test-forward-checking_8c.html#a8d8bb23667ef5a832ac998a3204d6838" title=" " alt="" coords="119,351,230,376"/>
<area shape="poly" title=" " alt="" coords="301,221,294,227,282,240,276,254,271,282,265,312,258,327,246,341,229,353,226,348,242,337,254,324,260,310,265,282,271,252,278,237,290,223,297,217"/>
<area shape="rect" href="test-forward-checking_8c.html#a840291bc02cba5474a4cb46a9b9566fe" title=" " alt="" coords="5,252,57,277"/>
<area shape="poly" title=" " alt="" coords="119,187,107,194,71,224,45,253,41,250,67,220,104,189,117,182"/>
<area shape="rect" href="test-solve-forward-checking_8c.html#a840291bc02cba5474a4cb46a9b9566fe" title=" " alt="" coords="5,104,57,129"/>
<area shape="poly" title=" " alt="" coords="96,119,57,119,57,114,96,114"/>
<area shape="poly" title=" " alt="" coords="125,235,59,258,57,253,123,230"/>
<area shape="poly" title=" " alt="" coords="98,267,57,267,57,262,98,262"/>
<area shape="poly" title=" " alt="" coords="123,299,57,276,59,271,125,294"/>
<area shape="poly" title=" " alt="" coords="114,347,104,342,67,310,40,279,44,276,70,306,107,337,117,343"/>
<area shape="rect" href="test-order-values-lcv_8c.html#a840291bc02cba5474a4cb46a9b9566fe" title=" " alt="" coords="363,236,415,261"/>
<area shape="poly" title=" " alt="" coords="519,249,415,251,415,245,519,243"/>
</map>
</div>

</div>
</div>
<a id="a2840f304ec278feae32d3d11915a7a78" name="a2840f304ec278feae32d3d11915a7a78"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2840f304ec278feae32d3d11915a7a78">&#9670;&#160;</a></span>prune_neighbors()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void prune_neighbors </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="csp_8h.html#aae386fbd70088e2ccb0080b6758d590f">CSPProblem</a> *&#160;</td>
          <td class="paramname"><em>csp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const size_t *&#160;</td>
          <td class="paramname"><em>values</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="forward-checking_8h.html#a45693bcbd5370e7777a5c1f0a74ef0a2">CSPForwardCheckContext</a> *&#160;</td>
          <td class="paramname"><em>ctx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>var</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t *&#160;</td>
          <td class="paramname"><em>counts</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t **&#160;</td>
          <td class="paramname"><em>pruned</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">extern</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Prunes inconsistent values from neighboring variables after an assignment. </p>
<p>This function is a key component of the forward checking algorithm. After assigning a value to a variable, this function checks all neighboring variables (those that share a constraint with the assigned variable) and removes any values that would violate a constraint with the current assignment.</p>
<p>The pruned values are recorded so they can be restored if backtracking becomes necessary.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">csp</td><td>The CSP problem instance. </td></tr>
    <tr><td class="paramname">values</td><td>The current assignment of values to variables. </td></tr>
    <tr><td class="paramname">data</td><td>User-provided data for constraint checking. </td></tr>
    <tr><td class="paramname">ctx</td><td>The forward checking context to update. </td></tr>
    <tr><td class="paramname">var</td><td>The variable that was just assigned. </td></tr>
    <tr><td class="paramname">counts</td><td>Array to record the number of pruned values for each variable. </td></tr>
    <tr><td class="paramname">pruned</td><td>2D array to record which values were pruned from each variable. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section pre"><dt>Precondition</dt><dd>csp, values, ctx, counts, and pruned must not be NULL. </dd>
<dd>
var must be a valid variable index in the CSP. </dd>
<dd>
counts must be an array of size ctx-&gt;num_domains, initialized to zeros. </dd>
<dd>
pruned must be an array of size ctx-&gt;num_domains, initialized to NULL. </dd></dl>
<dl class="section post"><dt>Postcondition</dt><dd>Domain values that would violate constraints with the current assignment are marked as unavailable. </dd>
<dd>
counts[i] records the number of values pruned from variable i. </dd>
<dd>
pruned[i] records which values were pruned from variable i.</dd></dl>
<p>Prunes inconsistent values from neighboring variables after an assignment.</p>
<p>This function is the core of the forward checking algorithm. After a variable is assigned a value, this function examines all neighboring variables (those connected by constraints) and removes any values from their domains that would violate a constraint, given the current assignment.</p>
<p>For each binary constraint involving the assigned variable:</p><ol type="1">
<li>It identifies the other variable in the constraint</li>
<li>It checks each value in that variable's domain</li>
<li>If a value would violate the constraint with the current assignment, it's marked as unavailable</li>
<li>The pruned value is recorded so it can be restored if we need to backtrack</li>
</ol>
<p>The pruned values are tracked in two data structures:</p><ul>
<li>counts[v] records how many values were pruned from variable v</li>
<li>pruned[v] stores which values were pruned from variable v</li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">csp</td><td>The CSP problem. </td></tr>
    <tr><td class="paramname">values</td><td>The current assignment of values to variables. </td></tr>
    <tr><td class="paramname">data</td><td>User-provided data for constraint checking. </td></tr>
    <tr><td class="paramname">ctx</td><td>The forward checking context to update. </td></tr>
    <tr><td class="paramname">var</td><td>The variable that was just assigned. </td></tr>
    <tr><td class="paramname">counts</td><td>Array to record the number of pruned values for each variable. </td></tr>
    <tr><td class="paramname">pruned</td><td>2D array to record which values were pruned from each variable. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="heuristics_8c_source.html#l00234">234</a> of file <a class="el" href="heuristics_8c_source.html">heuristics.c</a>.</p>

<p class="reference">References <a class="el" href="forward-checking_8h_source.html#l00080">_CSPForwardCheckContext::assigned</a>, <a class="el" href="csp_8c_source.html#l00105">csp_constraint_get_arity()</a>, <a class="el" href="csp_8c_source.html#l00110">csp_constraint_get_check()</a>, <a class="el" href="csp_8c_source.html#l00121">csp_constraint_get_variable()</a>, <a class="el" href="csp_8c_source.html#l00243">csp_problem_get_constraint()</a>, <a class="el" href="csp_8c_source.html#l00221">csp_problem_get_num_constraints()</a>, <a class="el" href="forward-checking_8h_source.html#l00079">_CSPForwardCheckContext::current_domains</a>, and <a class="el" href="forward-checking_8h_source.html#l00078">_CSPForwardCheckContext::original_domain_sizes</a>.</p>

<p class="reference">Referenced by <a class="el" href="forward-checking_8c_source.html#l00081">backtrack_fc()</a>, and <a class="el" href="test-prune-neighbors_8c_source.html#l00015">test_prune_neighbors()</a>.</p>
<div id="dynsection-4" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-4-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-4-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-4-content" class="dyncontent" style="display:none;">
<div class="center"><img src="heuristics_8h_a2840f304ec278feae32d3d11915a7a78_cgraph.png" border="0" usemap="#aheuristics_8h_a2840f304ec278feae32d3d11915a7a78_cgraph" alt=""/></div>
<map name="aheuristics_8h_a2840f304ec278feae32d3d11915a7a78_cgraph" id="aheuristics_8h_a2840f304ec278feae32d3d11915a7a78_cgraph">
<area shape="rect" title="Prunes inconsistent values from neighboring variables after an assignment." alt="" coords="5,141,135,166"/>
<area shape="rect" href="csp_8c.html#a0ec9ba5a3f78127657d0ab0f2d3a5bbd" title="Gets the arity of a constraint." alt="" coords="212,5,348,45"/>
<area shape="poly" title=" " alt="" coords="81,138,123,98,151,75,181,55,198,47,200,51,184,60,154,79,127,102,85,142"/>
<area shape="rect" href="csp_8c.html#ac9b8e8925b0302c3cdd35b0186a1acd8" title="Gets the check function associated with a constraint." alt="" coords="212,69,348,109"/>
<area shape="poly" title=" " alt="" coords="112,138,200,111,201,116,114,143"/>
<area shape="rect" href="csp_8c.html#a4cfb5884d7fe282dbecebefb53bb9cdd" title="Gets the variable ID associated with a specific position in the constraint." alt="" coords="212,133,348,173"/>
<area shape="poly" title=" " alt="" coords="135,151,198,151,198,156,135,156"/>
<area shape="rect" href="csp_8c.html#aba7697a379d5f761429bb911e2bc2bbc" title="Gets the constraint at the specified position in the CSP problem." alt="" coords="183,198,377,223"/>
<area shape="poly" title=" " alt="" coords="115,163,183,183,217,192,216,197,182,188,114,169"/>
<area shape="rect" href="csp_8c.html#a1dc56cea8c87ec1ef2e4489536cd1f0e" title="Gets the number of constraints in the CSP problem." alt="" coords="199,248,361,288"/>
<area shape="poly" title=" " alt="" coords="88,164,129,197,184,232,201,240,199,245,181,237,126,202,84,168"/>
<area shape="rect" href="csp_8c.html#aca1712012517bff1090a471f502cf729" title="Checks if the CSP library is initialized." alt="" coords="425,141,531,166"/>
<area shape="poly" title=" " alt="" coords="349,41,379,55,425,91,460,128,456,132,421,95,376,60,347,46"/>
<area shape="poly" title=" " alt="" coords="343,107,426,134,424,139,342,112"/>
<area shape="poly" title=" " alt="" coords="348,151,411,151,411,156,348,156"/>
<area shape="poly" title=" " alt="" coords="331,195,377,183,425,168,426,173,378,188,333,200"/>
<area shape="poly" title=" " alt="" coords="348,246,376,232,417,204,452,174,455,178,421,208,379,237,350,250"/>
</map>
</div>
<div id="dynsection-5" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-5-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-5-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-5-content" class="dyncontent" style="display:none;">
<div class="center"><img src="heuristics_8h_a2840f304ec278feae32d3d11915a7a78_icgraph.png" border="0" usemap="#aheuristics_8h_a2840f304ec278feae32d3d11915a7a78_icgraph" alt=""/></div>
<map name="aheuristics_8h_a2840f304ec278feae32d3d11915a7a78_icgraph" id="aheuristics_8h_a2840f304ec278feae32d3d11915a7a78_icgraph">
<area shape="rect" title="Prunes inconsistent values from neighboring variables after an assignment." alt="" coords="740,208,869,233"/>
<area shape="rect" href="forward-checking_8c.html#a1f0b1f4d23987c6c2209df2c7e2570ce" title=" " alt="" coords="564,181,661,207"/>
<area shape="poly" title=" " alt="" coords="726,212,661,203,662,198,727,207"/>
<area shape="rect" href="test-prune-neighbors_8c.html#adfd3efeb770bf4bc80c71cdab729c81d" title=" " alt="" coords="533,232,692,257"/>
<area shape="poly" title=" " alt="" coords="727,233,693,237,692,232,726,228"/>
<area shape="poly" title=" " alt="" coords="647,171,637,163,613,160,592,162,582,167,579,172,585,180,581,183,574,173,578,163,591,157,613,155,639,158,650,167"/>
<area shape="rect" href="forward-checking_8c.html#aab2b763fd1833131dc1b7f43b2c7942a" title="Solves a CSP problem using the forward checking algorithm with heuristics." alt="" coords="292,171,485,211"/>
<area shape="poly" title=" " alt="" coords="550,196,486,195,486,190,550,191"/>
<area shape="rect" href="test-solve-sudoku-integration_8c.html#ae66f6b31b5ad750f1fe042a706a4e3d4" title=" " alt="" coords="149,5,201,31"/>
<area shape="poly" title=" " alt="" coords="363,162,311,102,278,71,243,44,200,26,202,21,245,40,282,67,315,99,367,158"/>
<area shape="rect" href="solve-queens_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title=" " alt="" coords="149,55,201,80"/>
<area shape="poly" title=" " alt="" coords="350,165,301,129,243,94,200,77,202,72,245,89,304,124,354,160"/>
<area shape="rect" href="test-forward-checking_8c.html#ad73208eb4ba9df875d1fdf3c0b43a6e7" title=" " alt="" coords="117,153,232,179"/>
<area shape="poly" title=" " alt="" coords="278,181,232,175,232,170,279,176"/>
<area shape="rect" href="test-solve-forward-checking_8c.html#ad2ec5370481a424ba0df59de2b8ede5b" title=" " alt="" coords="109,104,240,129"/>
<area shape="poly" title=" " alt="" coords="317,169,243,143,211,132,213,127,245,138,319,164"/>
<area shape="rect" href="test-forward-checking_8c.html#aebadbf73aad5c0730e4272306f6a5388" title=" " alt="" coords="105,203,244,228"/>
<area shape="poly" title=" " alt="" coords="278,206,245,210,244,205,278,201"/>
<area shape="rect" href="test-forward-checking_8c.html#ab497f67117be78c07a415960ba822485" title=" " alt="" coords="111,252,238,277"/>
<area shape="poly" title=" " alt="" coords="317,218,214,254,212,249,316,213"/>
<area shape="rect" href="test-forward-checking_8c.html#a769d87bae594656fbf9732ac5173f5b1" title=" " alt="" coords="110,301,239,327"/>
<area shape="poly" title=" " alt="" coords="304,220,294,227,279,242,270,259,262,275,246,292,225,304,223,299,242,288,257,272,266,256,274,239,290,223,301,216"/>
<area shape="rect" href="test-forward-checking_8c.html#a8d8bb23667ef5a832ac998a3204d6838" title=" " alt="" coords="119,351,230,376"/>
<area shape="poly" title=" " alt="" coords="301,221,294,227,282,240,276,254,271,282,265,312,258,327,246,341,229,353,226,348,242,337,254,324,260,310,265,282,271,252,278,237,290,223,297,217"/>
<area shape="rect" href="test-forward-checking_8c.html#a840291bc02cba5474a4cb46a9b9566fe" title=" " alt="" coords="5,252,57,277"/>
<area shape="poly" title=" " alt="" coords="119,187,107,194,71,224,45,253,41,250,67,220,104,189,117,182"/>
<area shape="rect" href="test-solve-forward-checking_8c.html#a840291bc02cba5474a4cb46a9b9566fe" title=" " alt="" coords="5,104,57,129"/>
<area shape="poly" title=" " alt="" coords="96,119,57,119,57,114,96,114"/>
<area shape="poly" title=" " alt="" coords="125,235,59,258,57,253,123,230"/>
<area shape="poly" title=" " alt="" coords="98,267,57,267,57,262,98,262"/>
<area shape="poly" title=" " alt="" coords="123,299,57,276,59,271,125,294"/>
<area shape="poly" title=" " alt="" coords="114,347,104,342,67,310,40,279,44,276,70,306,107,337,117,343"/>
<area shape="rect" href="test-prune-neighbors_8c.html#a840291bc02cba5474a4cb46a9b9566fe" title=" " alt="" coords="363,236,415,261"/>
<area shape="poly" title=" " alt="" coords="520,249,415,251,415,246,520,244"/>
</map>
</div>

</div>
</div>
<a id="a22131bfb5921b024b7886b33b3fa1c4b" name="a22131bfb5921b024b7886b33b3fa1c4b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a22131bfb5921b024b7886b33b3fa1c4b">&#9670;&#160;</a></span>restore_pruned()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void restore_pruned </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="forward-checking_8h.html#a45693bcbd5370e7777a5c1f0a74ef0a2">CSPForwardCheckContext</a> *&#160;</td>
          <td class="paramname"><em>ctx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const size_t *&#160;</td>
          <td class="paramname"><em>counts</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t **&#160;</td>
          <td class="paramname"><em>pruned</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">extern</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Restores previously pruned values when backtracking. </p>
<p>When backtracking occurs (due to encountering a dead end in the search), this function restores all the domain values that were previously pruned during forward checking. This ensures that the search can continue correctly with different assignments.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ctx</td><td>The forward checking context to update. </td></tr>
    <tr><td class="paramname">counts</td><td>Array indicating how many values were pruned for each variable. </td></tr>
    <tr><td class="paramname">pruned</td><td>2D array indicating which values were pruned from each variable. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section pre"><dt>Precondition</dt><dd>ctx, counts, and pruned must not be NULL. </dd>
<dd>
pruned[i] must either be NULL or point to an array recording which values were pruned from variable i. </dd></dl>
<dl class="section post"><dt>Postcondition</dt><dd>All pruned values are restored (marked as available again). </dd>
<dd>
Memory allocated for the pruned arrays is freed.</dd></dl>
<p>Restores previously pruned values when backtracking.</p>
<p>When the solving algorithm needs to backtrack (because it reached a dead end), this function restores all the domain values that were pruned as a result of the assignment that's being undone. This ensures that the search can continue with different value assignments.</p>
<p>For each variable:</p><ol type="1">
<li>It examines the list of values that were pruned from that variable</li>
<li>It marks each of these values as available again in the current domains</li>
<li>It frees the memory used to track pruned values</li>
</ol>
<p>This function is essential for the completeness of the backtracking algorithm, ensuring that no potential solutions are missed.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ctx</td><td>The forward checking context to update. </td></tr>
    <tr><td class="paramname">counts</td><td>Array indicating how many values were pruned for each variable. </td></tr>
    <tr><td class="paramname">pruned</td><td>2D array indicating which values were pruned from each variable. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="heuristics_8c_source.html#l00311">311</a> of file <a class="el" href="heuristics_8c_source.html">heuristics.c</a>.</p>

<p class="reference">References <a class="el" href="forward-checking_8h_source.html#l00079">_CSPForwardCheckContext::current_domains</a>, and <a class="el" href="forward-checking_8h_source.html#l00077">_CSPForwardCheckContext::num_domains</a>.</p>

<p class="reference">Referenced by <a class="el" href="forward-checking_8c_source.html#l00081">backtrack_fc()</a>, <a class="el" href="test-prune-neighbors_8c_source.html#l00015">test_prune_neighbors()</a>, and <a class="el" href="test-restore-pruned_8c_source.html#l00009">test_restore_pruned()</a>.</p>
<div id="dynsection-6" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-6-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-6-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-6-content" class="dyncontent" style="display:none;">
<div class="center"><img src="heuristics_8h_a22131bfb5921b024b7886b33b3fa1c4b_icgraph.png" border="0" usemap="#aheuristics_8h_a22131bfb5921b024b7886b33b3fa1c4b_icgraph" alt=""/></div>
<map name="aheuristics_8h_a22131bfb5921b024b7886b33b3fa1c4b_icgraph" id="aheuristics_8h_a22131bfb5921b024b7886b33b3fa1c4b_icgraph">
<area shape="rect" title="Restores previously pruned values when backtracking." alt="" coords="740,236,859,261"/>
<area shape="rect" href="forward-checking_8c.html#a1f0b1f4d23987c6c2209df2c7e2570ce" title=" " alt="" coords="564,183,661,208"/>
<area shape="poly" title=" " alt="" coords="740,235,657,211,658,205,742,230"/>
<area shape="rect" href="test-prune-neighbors_8c.html#adfd3efeb770bf4bc80c71cdab729c81d" title=" " alt="" coords="533,236,692,261"/>
<area shape="poly" title=" " alt="" coords="726,251,692,251,692,246,726,246"/>
<area shape="rect" href="test-restore-pruned_8c.html#a762d70ca352fb5ef5378618485a8b591" title=" " alt="" coords="538,285,687,311"/>
<area shape="poly" title=" " alt="" coords="738,267,663,288,661,283,737,262"/>
<area shape="poly" title=" " alt="" coords="646,172,636,164,613,161,593,163,583,168,580,174,586,181,582,184,575,174,579,164,591,158,613,156,638,160,649,168"/>
<area shape="rect" href="forward-checking_8c.html#aab2b763fd1833131dc1b7f43b2c7942a" title="Solves a CSP problem using the forward checking algorithm with heuristics." alt="" coords="292,171,485,211"/>
<area shape="poly" title=" " alt="" coords="550,197,486,196,486,190,551,192"/>
<area shape="rect" href="test-solve-sudoku-integration_8c.html#ae66f6b31b5ad750f1fe042a706a4e3d4" title=" " alt="" coords="149,5,201,31"/>
<area shape="poly" title=" " alt="" coords="363,162,311,102,278,71,243,44,200,26,202,21,245,40,282,67,315,99,367,158"/>
<area shape="rect" href="solve-queens_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title=" " alt="" coords="149,55,201,80"/>
<area shape="poly" title=" " alt="" coords="350,165,301,129,243,94,200,77,202,72,245,89,304,124,354,160"/>
<area shape="rect" href="test-forward-checking_8c.html#ad73208eb4ba9df875d1fdf3c0b43a6e7" title=" " alt="" coords="117,153,232,179"/>
<area shape="poly" title=" " alt="" coords="278,181,232,175,232,170,279,176"/>
<area shape="rect" href="test-solve-forward-checking_8c.html#ad2ec5370481a424ba0df59de2b8ede5b" title=" " alt="" coords="109,104,240,129"/>
<area shape="poly" title=" " alt="" coords="317,169,243,143,211,132,213,127,245,138,319,164"/>
<area shape="rect" href="test-forward-checking_8c.html#aebadbf73aad5c0730e4272306f6a5388" title=" " alt="" coords="105,203,244,228"/>
<area shape="poly" title=" " alt="" coords="278,206,245,210,244,205,278,201"/>
<area shape="rect" href="test-forward-checking_8c.html#ab497f67117be78c07a415960ba822485" title=" " alt="" coords="111,252,238,277"/>
<area shape="poly" title=" " alt="" coords="315,218,293,226,212,254,211,249,291,221,313,213"/>
<area shape="rect" href="test-forward-checking_8c.html#a769d87bae594656fbf9732ac5173f5b1" title=" " alt="" coords="110,301,239,327"/>
<area shape="poly" title=" " alt="" coords="301,220,294,225,278,241,270,258,262,275,246,292,225,304,223,299,242,288,258,272,266,255,274,238,290,221,298,216"/>
<area shape="rect" href="test-forward-checking_8c.html#a8d8bb23667ef5a832ac998a3204d6838" title=" " alt="" coords="119,351,230,376"/>
<area shape="poly" title=" " alt="" coords="298,221,294,225,282,239,276,253,271,282,265,311,258,326,246,341,229,353,226,348,242,337,254,323,260,310,265,281,270,251,278,236,290,221,295,217"/>
<area shape="rect" href="test-forward-checking_8c.html#a840291bc02cba5474a4cb46a9b9566fe" title=" " alt="" coords="5,252,57,277"/>
<area shape="poly" title=" " alt="" coords="117,187,107,192,70,223,44,254,40,250,67,219,104,188,114,182"/>
<area shape="rect" href="test-solve-forward-checking_8c.html#a840291bc02cba5474a4cb46a9b9566fe" title=" " alt="" coords="5,104,57,129"/>
<area shape="poly" title=" " alt="" coords="96,119,57,119,57,114,96,114"/>
<area shape="poly" title=" " alt="" coords="125,235,59,258,57,253,123,230"/>
<area shape="poly" title=" " alt="" coords="98,267,57,267,57,262,98,262"/>
<area shape="poly" title=" " alt="" coords="123,299,57,276,59,271,125,294"/>
<area shape="poly" title=" " alt="" coords="114,347,104,342,67,310,40,279,44,276,70,306,107,337,117,343"/>
<area shape="rect" href="test-prune-neighbors_8c.html#a840291bc02cba5474a4cb46a9b9566fe" title=" " alt="" coords="363,236,415,261"/>
<area shape="poly" title=" " alt="" coords="520,251,415,251,415,246,520,246"/>
<area shape="rect" href="test-restore-pruned_8c.html#a840291bc02cba5474a4cb46a9b9566fe" title=" " alt="" coords="363,285,415,311"/>
<area shape="poly" title=" " alt="" coords="524,301,415,301,415,295,524,295"/>
</map>
</div>

</div>
</div>
<a id="a934ee1c54ecdfa65b205d3f9888e38de" name="a934ee1c54ecdfa65b205d3f9888e38de"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a934ee1c54ecdfa65b205d3f9888e38de">&#9670;&#160;</a></span>select_unassigned_var()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">size_t select_unassigned_var </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="forward-checking_8h.html#a45693bcbd5370e7777a5c1f0a74ef0a2">CSPForwardCheckContext</a> *&#160;</td>
          <td class="paramname"><em>ctx</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">extern</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Selects the next unassigned variable using the MRV (Minimum Remaining Values) heuristic. </p>
<p>The MRV heuristic chooses the variable with the fewest remaining legal values in its domain. This is often referred to as the "most constrained variable" or "fail-first" heuristic, as it tends to identify variables that are most likely to cause a failure quickly, helping to prune the search tree more effectively.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ctx</td><td>The forward checking context containing domain and assignment information. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The index of the unassigned variable with the fewest remaining legal values. </dd></dl>
<dl class="section pre"><dt>Precondition</dt><dd>ctx must not be NULL. </dd>
<dd>
ctx must contain at least one unassigned variable.</dd></dl>
<p>Selects the next unassigned variable using the MRV (Minimum Remaining Values) heuristic.</p>
<p>This function examines all unassigned variables and selects the one with the fewest remaining legal values in its domain. This heuristic aims to identify the most constrained variable, which is most likely to cause a failure if left for later (the "fail-first" principle).</p>
<p>If multiple variables have the same minimum number of remaining values, the first one encountered is returned.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ctx</td><td>The forward checking context containing domain information. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The index of the unassigned variable with the fewest remaining legal values. </dd></dl>

<p class="definition">Definition at line <a class="el" href="heuristics_8c_source.html#l00042">42</a> of file <a class="el" href="heuristics_8c_source.html">heuristics.c</a>.</p>

<p class="reference">References <a class="el" href="forward-checking_8h_source.html#l00080">_CSPForwardCheckContext::assigned</a>, <a class="el" href="forward-checking_8h_source.html#l00079">_CSPForwardCheckContext::current_domains</a>, <a class="el" href="forward-checking_8h_source.html#l00077">_CSPForwardCheckContext::num_domains</a>, and <a class="el" href="forward-checking_8h_source.html#l00078">_CSPForwardCheckContext::original_domain_sizes</a>.</p>

<p class="reference">Referenced by <a class="el" href="forward-checking_8c_source.html#l00081">backtrack_fc()</a>, <a class="el" href="test-select-unassigned-var_8c_source.html#l00033">test_mrv_simple()</a>, and <a class="el" href="test-select-unassigned-var_8c_source.html#l00049">test_mrv_skip_assigned()</a>.</p>
<div id="dynsection-7" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-7-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-7-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-7-content" class="dyncontent" style="display:none;">
<div class="center"><img src="heuristics_8h_a934ee1c54ecdfa65b205d3f9888e38de_icgraph.png" border="0" usemap="#aheuristics_8h_a934ee1c54ecdfa65b205d3f9888e38de_icgraph" alt=""/></div>
<map name="aheuristics_8h_a934ee1c54ecdfa65b205d3f9888e38de_icgraph" id="aheuristics_8h_a934ee1c54ecdfa65b205d3f9888e38de_icgraph">
<area shape="rect" title="Selects the next unassigned variable using the MRV (Minimum Remaining Values) heuristic." alt="" coords="748,228,908,253"/>
<area shape="rect" href="forward-checking_8c.html#a1f0b1f4d23987c6c2209df2c7e2570ce" title=" " alt="" coords="568,179,665,204"/>
<area shape="poly" title=" " alt="" coords="759,227,665,205,666,200,760,222"/>
<area shape="rect" href="test-select-unassigned-var_8c.html#abd1084a4ba75b3e0e2f222dc15cdbec8" title=" " alt="" coords="555,228,678,253"/>
<area shape="poly" title=" " alt="" coords="734,243,678,243,678,238,734,238"/>
<area shape="rect" href="test-select-unassigned-var_8c.html#ade408e9a4302addb0a1986d2b9b5e039" title=" " alt="" coords="533,277,700,303"/>
<area shape="poly" title=" " alt="" coords="760,259,673,280,671,275,759,254"/>
<area shape="poly" title=" " alt="" coords="654,169,644,161,617,157,594,159,582,164,580,170,586,177,582,180,575,170,579,160,593,154,617,152,646,156,658,165"/>
<area shape="rect" href="forward-checking_8c.html#aab2b763fd1833131dc1b7f43b2c7942a" title="Solves a CSP problem using the forward checking algorithm with heuristics." alt="" coords="292,171,485,211"/>
<area shape="poly" title=" " alt="" coords="554,194,486,194,486,189,554,189"/>
<area shape="rect" href="test-solve-sudoku-integration_8c.html#ae66f6b31b5ad750f1fe042a706a4e3d4" title=" " alt="" coords="149,5,201,31"/>
<area shape="poly" title=" " alt="" coords="363,162,311,102,278,71,243,44,200,26,202,21,245,40,282,67,315,99,367,158"/>
<area shape="rect" href="solve-queens_8c.html#a0ddf1224851353fc92bfbff6f499fa97" title=" " alt="" coords="149,55,201,80"/>
<area shape="poly" title=" " alt="" coords="350,165,301,129,243,94,200,77,202,72,245,89,304,124,354,160"/>
<area shape="rect" href="test-forward-checking_8c.html#ad73208eb4ba9df875d1fdf3c0b43a6e7" title=" " alt="" coords="117,153,232,179"/>
<area shape="poly" title=" " alt="" coords="278,181,232,175,232,170,279,176"/>
<area shape="rect" href="test-solve-forward-checking_8c.html#ad2ec5370481a424ba0df59de2b8ede5b" title=" " alt="" coords="109,104,240,129"/>
<area shape="poly" title=" " alt="" coords="317,169,243,143,211,132,213,127,245,138,319,164"/>
<area shape="rect" href="test-forward-checking_8c.html#aebadbf73aad5c0730e4272306f6a5388" title=" " alt="" coords="105,203,244,228"/>
<area shape="poly" title=" " alt="" coords="278,206,245,210,244,205,278,201"/>
<area shape="rect" href="test-forward-checking_8c.html#ab497f67117be78c07a415960ba822485" title=" " alt="" coords="111,252,238,277"/>
<area shape="poly" title=" " alt="" coords="317,218,214,254,212,249,316,213"/>
<area shape="rect" href="test-forward-checking_8c.html#a769d87bae594656fbf9732ac5173f5b1" title=" " alt="" coords="110,301,239,327"/>
<area shape="poly" title=" " alt="" coords="335,220,294,247,270,270,245,292,222,304,220,299,243,288,267,266,290,243,333,216"/>
<area shape="rect" href="test-forward-checking_8c.html#a8d8bb23667ef5a832ac998a3204d6838" title=" " alt="" coords="119,351,230,376"/>
<area shape="poly" title=" " alt="" coords="329,220,294,246,278,271,272,294,264,317,246,341,228,353,225,348,242,337,259,315,266,292,273,268,290,243,325,216"/>
<area shape="rect" href="test-forward-checking_8c.html#a840291bc02cba5474a4cb46a9b9566fe" title=" " alt="" coords="5,252,57,277"/>
<area shape="poly" title=" " alt="" coords="119,187,107,194,71,224,45,253,41,250,67,220,104,189,117,182"/>
<area shape="rect" href="test-solve-forward-checking_8c.html#a840291bc02cba5474a4cb46a9b9566fe" title=" " alt="" coords="5,104,57,129"/>
<area shape="poly" title=" " alt="" coords="96,119,57,119,57,114,96,114"/>
<area shape="poly" title=" " alt="" coords="125,235,59,258,57,253,123,230"/>
<area shape="poly" title=" " alt="" coords="98,267,57,267,57,262,98,262"/>
<area shape="poly" title=" " alt="" coords="123,299,57,276,59,271,125,294"/>
<area shape="poly" title=" " alt="" coords="114,347,104,342,67,310,40,279,44,276,70,306,107,337,117,343"/>
<area shape="rect" href="test-select-unassigned-var_8c.html#a840291bc02cba5474a4cb46a9b9566fe" title=" " alt="" coords="363,256,415,281"/>
<area shape="poly" title=" " alt="" coords="542,252,415,268,414,263,541,247"/>
<area shape="poly" title=" " alt="" coords="519,284,415,274,415,268,520,278"/>
</map>
</div>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="heuristics_8h.html">heuristics.h</a></li>
    <li class="footer">Generated on Sun May 4 2025 01:54:22 for CSP-lib: Constraint Satisfaction Problem Solver Library by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8 </li>
  </ul>
</div>
</body>
</html>
