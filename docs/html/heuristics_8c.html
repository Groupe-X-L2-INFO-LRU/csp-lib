<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>CSP-lib: Constraint Satisfaction Problem Solver Library: src/heuristics.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="custom_doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">CSP-lib: Constraint Satisfaction Problem Solver Library<span id="projectnumber">&#160;1.0</span>
   </div>
   <div id="projectbrief">A C library for modeling and solving constraint satisfaction problems with forward checking and heuristics</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('heuristics_8c.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">heuristics.c File Reference</div></div>
</div><!--header-->
<div class="contents">

<p>Implementation of heuristics for improving CSP solver performance.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="heuristics_8h_source.html">heuristics.h</a>&quot;</code><br />
<code>#include &lt;assert.h&gt;</code><br />
<code>#include &lt;stdint.h&gt;</code><br />
<code>#include &lt;stdlib.h&gt;</code><br />
<code>#include &quot;<a class="el" href="csp__internal_8h_source.html">csp_internal.h</a>&quot;</code><br />
</div><div class="textblock"><div id="dynsection-0" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-0-trigger" src="closed.png" alt="+"/> Include dependency graph for heuristics.c:</div>
<div id="dynsection-0-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-0-content" class="dyncontent" style="display:none;">
<div class="center"><img src="heuristics_8c__incl.png" border="0" usemap="#asrc_2heuristics_8c" alt=""/></div>
</div>
</div>
<p><a href="heuristics_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a9c3a8a6b03e49553f45c6144f97e1fb4" id="r_a9c3a8a6b03e49553f45c6144f97e1fb4"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="heuristics_8c.html#a9c3a8a6b03e49553f45c6144f97e1fb4">order_values_lcv</a> (const <a class="el" href="csp_8h.html#aae386fbd70088e2ccb0080b6758d590f">CSPProblem</a> *csp, <a class="el" href="forward-checking_8h.html#a45693bcbd5370e7777a5c1f0a74ef0a2">CSPForwardCheckContext</a> *ctx, const size_t *values, const void *data, size_t var, size_t *ordered, size_t *n_vals)</td></tr>
<tr class="memdesc:a9c3a8a6b03e49553f45c6144f97e1fb4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Implements the Least Constraining Value (LCV) heuristic for value ordering.  <br /></td></tr>
<tr class="separator:a9c3a8a6b03e49553f45c6144f97e1fb4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2840f304ec278feae32d3d11915a7a78" id="r_a2840f304ec278feae32d3d11915a7a78"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="heuristics_8c.html#a2840f304ec278feae32d3d11915a7a78">prune_neighbors</a> (const <a class="el" href="csp_8h.html#aae386fbd70088e2ccb0080b6758d590f">CSPProblem</a> *csp, const size_t *values, const void *data, <a class="el" href="forward-checking_8h.html#a45693bcbd5370e7777a5c1f0a74ef0a2">CSPForwardCheckContext</a> *ctx, size_t var, size_t *counts, size_t **pruned)</td></tr>
<tr class="memdesc:a2840f304ec278feae32d3d11915a7a78"><td class="mdescLeft">&#160;</td><td class="mdescRight">Prunes inconsistent values from neighboring variables during forward checking.  <br /></td></tr>
<tr class="separator:a2840f304ec278feae32d3d11915a7a78"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a22131bfb5921b024b7886b33b3fa1c4b" id="r_a22131bfb5921b024b7886b33b3fa1c4b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="heuristics_8c.html#a22131bfb5921b024b7886b33b3fa1c4b">restore_pruned</a> (<a class="el" href="forward-checking_8h.html#a45693bcbd5370e7777a5c1f0a74ef0a2">CSPForwardCheckContext</a> *ctx, const size_t *counts, size_t **pruned)</td></tr>
<tr class="memdesc:a22131bfb5921b024b7886b33b3fa1c4b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Restores values that were pruned during forward checking when backtracking occurs.  <br /></td></tr>
<tr class="separator:a22131bfb5921b024b7886b33b3fa1c4b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a934ee1c54ecdfa65b205d3f9888e38de" id="r_a934ee1c54ecdfa65b205d3f9888e38de"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="heuristics_8c.html#a934ee1c54ecdfa65b205d3f9888e38de">select_unassigned_var</a> (const <a class="el" href="forward-checking_8h.html#a45693bcbd5370e7777a5c1f0a74ef0a2">CSPForwardCheckContext</a> *ctx)</td></tr>
<tr class="memdesc:a934ee1c54ecdfa65b205d3f9888e38de"><td class="mdescLeft">&#160;</td><td class="mdescRight">Implements the Minimum Remaining Values (MRV) heuristic for variable selection.  <br /></td></tr>
<tr class="separator:a934ee1c54ecdfa65b205d3f9888e38de"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Implementation of heuristics for improving CSP solver performance. </p>
<p>This file implements various heuristics used in constraint satisfaction problem solving:</p>
<ol type="1">
<li>Minimum Remaining Values (MRV): For variable selection</li>
<li>Least Constraining Value (LCV): For value ordering</li>
<li>Domain pruning mechanisms for forward checking</li>
<li>Restoration of pruned domains during backtracking</li>
</ol>
<p>These heuristics significantly improve the efficiency of the solving process by making intelligent choices that reduce the search space.</p>
<dl class="section author"><dt>Author</dt><dd>Ch. Demko (original) </dd></dl>
<dl class="section date"><dt>Date</dt><dd>2024-2025 </dd></dl>
<dl class="section version"><dt>Version</dt><dd>1.0 </dd></dl>

<p class="definition">Definition in file <a class="el" href="heuristics_8c_source.html">heuristics.c</a>.</p>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="a9c3a8a6b03e49553f45c6144f97e1fb4" name="a9c3a8a6b03e49553f45c6144f97e1fb4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9c3a8a6b03e49553f45c6144f97e1fb4">&#9670;&#160;</a></span>order_values_lcv()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void order_values_lcv </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="csp_8h.html#aae386fbd70088e2ccb0080b6758d590f">CSPProblem</a> *&#160;</td>
          <td class="paramname"><em>csp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="forward-checking_8h.html#a45693bcbd5370e7777a5c1f0a74ef0a2">CSPForwardCheckContext</a> *&#160;</td>
          <td class="paramname"><em>ctx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const size_t *&#160;</td>
          <td class="paramname"><em>values</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>var</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t *&#160;</td>
          <td class="paramname"><em>ordered</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t *&#160;</td>
          <td class="paramname"><em>n_vals</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Implements the Least Constraining Value (LCV) heuristic for value ordering. </p>
<p>Orders values for a given variable using the LCV (Least Constraining Value) heuristic.</p>
<p>This function orders the values in a variable's domain by how constraining they are on the domains of neighboring variables (those connected by constraints).</p>
<p>For each possible value in the domain:</p><ol type="1">
<li>It counts how many values would become invalid in neighboring variables if this value is chosen</li>
<li>It sorts the values from least constraining (fewest conflicts) to most constraining</li>
</ol>
<p>This heuristic increases the likelihood of finding a valid assignment without backtracking by trying the values that leave the most flexibility for future assignments first.</p>
<p>The implementation:</p><ul>
<li>Only considers binary constraints (between exactly 2 variables)</li>
<li>Uses a simple insertion sort to order the values</li>
<li>Temporarily modifies the values array for checking (but restores it)</li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">csp</td><td>The CSP problem. </td></tr>
    <tr><td class="paramname">ctx</td><td>The forward checking context. </td></tr>
    <tr><td class="paramname">values</td><td>The current assignment of values to variables. </td></tr>
    <tr><td class="paramname">data</td><td>User-provided data for constraint checking. </td></tr>
    <tr><td class="paramname">var</td><td>The variable for which to order values. </td></tr>
    <tr><td class="paramname">ordered</td><td>Output array where ordered values will be stored. </td></tr>
    <tr><td class="paramname">n_vals</td><td>Output parameter that will be set to the number of valid values. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="heuristics_8c_source.html#l00098">98</a> of file <a class="el" href="heuristics_8c_source.html">heuristics.c</a>.</p>

<p class="reference">References <a class="el" href="forward-checking_8h_source.html#l00080">_CSPForwardCheckContext::assigned</a>, <a class="el" href="csp__internal_8h_source.html#l00036">_CSPConstraint::check</a>, <a class="el" href="csp_8c_source.html#l00105">csp_constraint_get_arity()</a>, <a class="el" href="csp_8c_source.html#l00121">csp_constraint_get_variable()</a>, <a class="el" href="csp_8c_source.html#l00243">csp_problem_get_constraint()</a>, <a class="el" href="csp_8c_source.html#l00221">csp_problem_get_num_constraints()</a>, <a class="el" href="forward-checking_8h_source.html#l00079">_CSPForwardCheckContext::current_domains</a>, and <a class="el" href="forward-checking_8h_source.html#l00078">_CSPForwardCheckContext::original_domain_sizes</a>.</p>

<p class="reference">Referenced by <a class="el" href="forward-checking_8c_source.html#l00081">backtrack_fc()</a>, and <a class="el" href="test-order-values-lcv_8c_source.html#l00017">test_lcv_basic()</a>.</p>
<div id="dynsection-1" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-1-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-1-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-1-content" class="dyncontent" style="display:none;">
<div class="center"><img src="heuristics_8c_a9c3a8a6b03e49553f45c6144f97e1fb4_cgraph.png" border="0" usemap="#aheuristics_8c_a9c3a8a6b03e49553f45c6144f97e1fb4_cgraph" alt=""/></div>
</div>
<div id="dynsection-2" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-2-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-2-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-2-content" class="dyncontent" style="display:none;">
<div class="center"><img src="heuristics_8c_a9c3a8a6b03e49553f45c6144f97e1fb4_icgraph.png" border="0" usemap="#aheuristics_8c_a9c3a8a6b03e49553f45c6144f97e1fb4_icgraph" alt=""/></div>
</div>

</div>
</div>
<a id="a2840f304ec278feae32d3d11915a7a78" name="a2840f304ec278feae32d3d11915a7a78"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2840f304ec278feae32d3d11915a7a78">&#9670;&#160;</a></span>prune_neighbors()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void prune_neighbors </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="csp_8h.html#aae386fbd70088e2ccb0080b6758d590f">CSPProblem</a> *&#160;</td>
          <td class="paramname"><em>csp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const size_t *&#160;</td>
          <td class="paramname"><em>values</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="forward-checking_8h.html#a45693bcbd5370e7777a5c1f0a74ef0a2">CSPForwardCheckContext</a> *&#160;</td>
          <td class="paramname"><em>ctx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>var</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t *&#160;</td>
          <td class="paramname"><em>counts</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t **&#160;</td>
          <td class="paramname"><em>pruned</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Prunes inconsistent values from neighboring variables during forward checking. </p>
<p>Prunes inconsistent values from neighboring variables after an assignment.</p>
<p>This function is the core of the forward checking algorithm. After a variable is assigned a value, this function examines all neighboring variables (those connected by constraints) and removes any values from their domains that would violate a constraint, given the current assignment.</p>
<p>For each binary constraint involving the assigned variable:</p><ol type="1">
<li>It identifies the other variable in the constraint</li>
<li>It checks each value in that variable's domain</li>
<li>If a value would violate the constraint with the current assignment, it's marked as unavailable</li>
<li>The pruned value is recorded so it can be restored if we need to backtrack</li>
</ol>
<p>The pruned values are tracked in two data structures:</p><ul>
<li>counts[v] records how many values were pruned from variable v</li>
<li>pruned[v] stores which values were pruned from variable v</li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">csp</td><td>The CSP problem. </td></tr>
    <tr><td class="paramname">values</td><td>The current assignment of values to variables. </td></tr>
    <tr><td class="paramname">data</td><td>User-provided data for constraint checking. </td></tr>
    <tr><td class="paramname">ctx</td><td>The forward checking context to update. </td></tr>
    <tr><td class="paramname">var</td><td>The variable that was just assigned. </td></tr>
    <tr><td class="paramname">counts</td><td>Array to record the number of pruned values for each variable. </td></tr>
    <tr><td class="paramname">pruned</td><td>2D array to record which values were pruned from each variable. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="heuristics_8c_source.html#l00234">234</a> of file <a class="el" href="heuristics_8c_source.html">heuristics.c</a>.</p>

<p class="reference">References <a class="el" href="forward-checking_8h_source.html#l00080">_CSPForwardCheckContext::assigned</a>, <a class="el" href="csp_8c_source.html#l00105">csp_constraint_get_arity()</a>, <a class="el" href="csp_8c_source.html#l00110">csp_constraint_get_check()</a>, <a class="el" href="csp_8c_source.html#l00121">csp_constraint_get_variable()</a>, <a class="el" href="csp_8c_source.html#l00243">csp_problem_get_constraint()</a>, <a class="el" href="csp_8c_source.html#l00221">csp_problem_get_num_constraints()</a>, <a class="el" href="forward-checking_8h_source.html#l00079">_CSPForwardCheckContext::current_domains</a>, and <a class="el" href="forward-checking_8h_source.html#l00078">_CSPForwardCheckContext::original_domain_sizes</a>.</p>

<p class="reference">Referenced by <a class="el" href="forward-checking_8c_source.html#l00081">backtrack_fc()</a>, and <a class="el" href="test-prune-neighbors_8c_source.html#l00015">test_prune_neighbors()</a>.</p>
<div id="dynsection-3" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-3-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-3-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-3-content" class="dyncontent" style="display:none;">
<div class="center"><img src="heuristics_8c_a2840f304ec278feae32d3d11915a7a78_cgraph.png" border="0" usemap="#aheuristics_8c_a2840f304ec278feae32d3d11915a7a78_cgraph" alt=""/></div>
</div>
<div id="dynsection-4" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-4-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-4-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-4-content" class="dyncontent" style="display:none;">
<div class="center"><img src="heuristics_8c_a2840f304ec278feae32d3d11915a7a78_icgraph.png" border="0" usemap="#aheuristics_8c_a2840f304ec278feae32d3d11915a7a78_icgraph" alt=""/></div>
</div>

</div>
</div>
<a id="a22131bfb5921b024b7886b33b3fa1c4b" name="a22131bfb5921b024b7886b33b3fa1c4b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a22131bfb5921b024b7886b33b3fa1c4b">&#9670;&#160;</a></span>restore_pruned()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void restore_pruned </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="forward-checking_8h.html#a45693bcbd5370e7777a5c1f0a74ef0a2">CSPForwardCheckContext</a> *&#160;</td>
          <td class="paramname"><em>ctx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const size_t *&#160;</td>
          <td class="paramname"><em>counts</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t **&#160;</td>
          <td class="paramname"><em>pruned</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Restores values that were pruned during forward checking when backtracking occurs. </p>
<p>Restores previously pruned values when backtracking.</p>
<p>When the solving algorithm needs to backtrack (because it reached a dead end), this function restores all the domain values that were pruned as a result of the assignment that's being undone. This ensures that the search can continue with different value assignments.</p>
<p>For each variable:</p><ol type="1">
<li>It examines the list of values that were pruned from that variable</li>
<li>It marks each of these values as available again in the current domains</li>
<li>It frees the memory used to track pruned values</li>
</ol>
<p>This function is essential for the completeness of the backtracking algorithm, ensuring that no potential solutions are missed.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ctx</td><td>The forward checking context to update. </td></tr>
    <tr><td class="paramname">counts</td><td>Array indicating how many values were pruned for each variable. </td></tr>
    <tr><td class="paramname">pruned</td><td>2D array indicating which values were pruned from each variable. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="heuristics_8c_source.html#l00311">311</a> of file <a class="el" href="heuristics_8c_source.html">heuristics.c</a>.</p>

<p class="reference">References <a class="el" href="forward-checking_8h_source.html#l00079">_CSPForwardCheckContext::current_domains</a>, and <a class="el" href="forward-checking_8h_source.html#l00077">_CSPForwardCheckContext::num_domains</a>.</p>

<p class="reference">Referenced by <a class="el" href="forward-checking_8c_source.html#l00081">backtrack_fc()</a>, <a class="el" href="test-prune-neighbors_8c_source.html#l00015">test_prune_neighbors()</a>, and <a class="el" href="test-restore-pruned_8c_source.html#l00009">test_restore_pruned()</a>.</p>
<div id="dynsection-5" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-5-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-5-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-5-content" class="dyncontent" style="display:none;">
<div class="center"><img src="heuristics_8c_a22131bfb5921b024b7886b33b3fa1c4b_icgraph.png" border="0" usemap="#aheuristics_8c_a22131bfb5921b024b7886b33b3fa1c4b_icgraph" alt=""/></div>
</div>

</div>
</div>
<a id="a934ee1c54ecdfa65b205d3f9888e38de" name="a934ee1c54ecdfa65b205d3f9888e38de"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a934ee1c54ecdfa65b205d3f9888e38de">&#9670;&#160;</a></span>select_unassigned_var()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">size_t select_unassigned_var </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="forward-checking_8h.html#a45693bcbd5370e7777a5c1f0a74ef0a2">CSPForwardCheckContext</a> *&#160;</td>
          <td class="paramname"><em>ctx</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Implements the Minimum Remaining Values (MRV) heuristic for variable selection. </p>
<p>Selects the next unassigned variable using the MRV (Minimum Remaining Values) heuristic.</p>
<p>This function examines all unassigned variables and selects the one with the fewest remaining legal values in its domain. This heuristic aims to identify the most constrained variable, which is most likely to cause a failure if left for later (the "fail-first" principle).</p>
<p>If multiple variables have the same minimum number of remaining values, the first one encountered is returned.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ctx</td><td>The forward checking context containing domain information. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The index of the unassigned variable with the fewest remaining legal values. </dd></dl>

<p class="definition">Definition at line <a class="el" href="heuristics_8c_source.html#l00042">42</a> of file <a class="el" href="heuristics_8c_source.html">heuristics.c</a>.</p>

<p class="reference">References <a class="el" href="forward-checking_8h_source.html#l00080">_CSPForwardCheckContext::assigned</a>, <a class="el" href="forward-checking_8h_source.html#l00079">_CSPForwardCheckContext::current_domains</a>, <a class="el" href="forward-checking_8h_source.html#l00077">_CSPForwardCheckContext::num_domains</a>, and <a class="el" href="forward-checking_8h_source.html#l00078">_CSPForwardCheckContext::original_domain_sizes</a>.</p>

<p class="reference">Referenced by <a class="el" href="forward-checking_8c_source.html#l00081">backtrack_fc()</a>, <a class="el" href="test-select-unassigned-var_8c_source.html#l00033">test_mrv_simple()</a>, and <a class="el" href="test-select-unassigned-var_8c_source.html#l00049">test_mrv_skip_assigned()</a>.</p>
<div id="dynsection-6" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-6-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-6-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-6-content" class="dyncontent" style="display:none;">
<div class="center"><img src="heuristics_8c_a934ee1c54ecdfa65b205d3f9888e38de_icgraph.png" border="0" usemap="#aheuristics_8c_a934ee1c54ecdfa65b205d3f9888e38de_icgraph" alt=""/></div>
</div>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="heuristics_8c.html">heuristics.c</a></li>
    <li class="footer">Generated on Sat May 3 2025 22:54:35 for CSP-lib: Constraint Satisfaction Problem Solver Library by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8 </li>
  </ul>
</div>
</body>
</html>
